using System;
using System.Collections.Generic;

namespace ConsoleApp2
{
	class Program
	{
		static void Main(string[] args)
		{
			user user1 = new user("honza");
			user user2 = new user("karel");
			user user3 = new user("radko");

			List<user> uzivatele = new List<user> { user1, user2, user3 };



			while (true)
			{
				Console.Clear();

				Console.Write("Napiš jméno: ");
				string JMENO = Console.ReadLine().ToLower();

				if (uzivatele.Exists(u => u.jmeno == JMENO))
				{
					user uziv = uzivatele.Find(u => u.jmeno == JMENO);

					Console.Write("Zadej pin: ");
					string PIN = Console.ReadLine();

					if (uziv.pin == user.encryptPin(PIN))
					{
						string cmd = "";

						while (cmd != "odhlasit")
						{
							Console.Write("Zadejte příkaz: ");
							cmd = Console.ReadLine();

							switch (cmd)
							{
								case "zustatek":
									Console.WriteLine($"Na účtě máte {uziv.zustatek} kč");
									continue;

								case "vybrat":
									Console.Write("Kolik kč chcete vybrat: ");
									int castka = int.Parse(Console.ReadLine());
									if (uziv.zustatek - castka >= 0)
									{
										uziv.zustatek -= castka;
									}

									continue;

								case "poslat":
									Console.Write("Komu chcete peníze poslat: ");
									string prijemce = Console.ReadLine().ToLower();
									Console.Write("Zadejte částku: ");
									castka = int.Parse(Console.ReadLine());

									if (uzivatele.Exists(u => u.jmeno == prijemce) && uziv.zustatek - castka >= 0)
									{
										uziv.zustatek -= castka;
										uzivatele.Find(u => u.jmeno == prijemce).zustatek += castka;

										Console.WriteLine($"Bylo posláno {castka} kč na účet {prijemce}");
									}
									continue;


								default:
									break;
							}
						}
					}
					else
					{
						Console.WriteLine("Špatný pin");
					}

				}
				else
				{
					Console.WriteLine("Uživatel eexistuje");
				}
			}
		}
	}
}